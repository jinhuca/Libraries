<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Shared.xaml"/>
  </ResourceDictionary.MergedDictionaries>

  <ControlTemplate x:Key="CheckBoxTemplate" TargetType="CheckBox">
    <ControlTemplate.Resources>
      <Storyboard x:Key="Hovering">
        <ColorAnimation Storyboard.TargetName="bulletDecoratorBackground"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Background_MouseOver}" 
                        Duration="0"/>
        <ColorAnimation Storyboard.TargetName="rectangleBulletBackgroundBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Background_MouseOver}"
                        Duration="0"/>
        <!--<DoubleAnimation Storyboard.TargetName="rectangleBulletBackground"
                         Storyboard.TargetProperty="StrokeThickness"
                         To="2" Duration="0"/>-->
        <ColorAnimation Storyboard.TargetName="rectangleBulletStrokeBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Border_MouseOver}"
                        Duration="0"/>
      </Storyboard>
      <Storyboard x:Key="Pressing">
        <ColorAnimation Storyboard.TargetName="rectangleBulletBackgroundBrush"
                        Storyboard.TargetProperty="Color"
                        To="{DynamicResource Color_Background_Pressed}"
                        Duration="0"/>
        <ColorAnimation Storyboard.TargetName="rectangleBulletStrokeBrush"
                        Storyboard.TargetProperty="Color"
                        To="{DynamicResource Color_Border_Pressed}"
                        Duration="0"/>
      </Storyboard>
      <Storyboard x:Key="Checking">
        <DoubleAnimation Storyboard.TargetName="pathBulletCheckIcon" 
                         Storyboard.TargetProperty="Opacity"
                         To="1" Duration="0"/>
      </Storyboard>
      <Storyboard x:Key="CheckingOff">
        <DoubleAnimation Storyboard.TargetName="pathBulletCheckIcon" 
                         Storyboard.TargetProperty="Opacity"
                         To="0" Duration="0"/>
      </Storyboard>
      <Storyboard x:Key="IndeterminateOn">
        <DoubleAnimation Storyboard.TargetName="rectangleIndeterminateBackground" 
                         Storyboard.TargetProperty="Opacity"
                         To="1" Duration="0"/>
      </Storyboard>
      <Storyboard x:Key="IndeterminateOff">
        <DoubleAnimation Storyboard.TargetName="rectangleIndeterminateBackground" 
                         Storyboard.TargetProperty="Opacity"
                         To="0" Duration="0"/>
      </Storyboard>

      <Storyboard x:Key="Focusing">
        <ColorAnimation Storyboard.TargetName="bulletDecoratorBackground"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Background_Focused}" 
                        Duration="0"/>
        <ColorAnimation Storyboard.TargetName="rectangleBulletStrokeBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Border_Focused}"
                        Duration="0"/>
        <DoubleAnimation Storyboard.TargetName="rectangleBulletFocus"
                         Storyboard.TargetProperty="Opacity"
                         To="1" Duration="0"/>
      </Storyboard>

      <Storyboard x:Key="FocusingOff">
        <ColorAnimation Storyboard.TargetName="bulletDecoratorBackground"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Background_Normal}" 
                        Duration="0"/>
        <ColorAnimation Storyboard.TargetName="rectangleBulletStrokeBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Border_Normal}"
                        Duration="0"/>
        <DoubleAnimation Storyboard.TargetName="rectangleBulletFocus"
                         Storyboard.TargetProperty="Opacity"
                         To="0" Duration="0"/>
      </Storyboard>

      <Storyboard x:Key="Disabling">
        <ColorAnimation Storyboard.TargetName="rectangleBulletBackgroundBrush"
                        Storyboard.TargetProperty="Color"
                        To="{DynamicResource Color_Background_Disable}"
                        Duration="0:0:0.1"/>
        <ColorAnimation Storyboard.TargetName="rectangleBulletStrokeBrush"
                        Storyboard.TargetProperty="Color"
                        To="{DynamicResource Color_Border_Disable}"
                        Duration="0:0:0.1"/>
      </Storyboard>

      <Storyboard x:Key="InvalidingFocused">
        <DoubleAnimation Storyboard.TargetName="rectangleBulletInvalid"
                         Storyboard.TargetProperty="Opacity"
                         To="1" Duration="0"/>
        <DoubleAnimation Storyboard.TargetName="rectangleBulletBackground"
                         Storyboard.TargetProperty="Opacity"
                         To="0" Duration="0"/>
        <DoubleAnimation Storyboard.TargetName="gridContent"
                         Storyboard.TargetProperty="Opacity"
                         To="0.3" Duration="0"/>
      </Storyboard>
      
      <Storyboard x:Key="InvalidingUnfocused">
        <DoubleAnimation Storyboard.TargetName="rectangleBulletInvalid"
                         Storyboard.TargetProperty="Opacity"
                         To="0.5" Duration="0"/>
        <DoubleAnimation Storyboard.TargetName="rectangleBulletBackground"
                         Storyboard.TargetProperty="Opacity"
                         To="0" Duration="0"/>
        <DoubleAnimation Storyboard.TargetName="gridContent"
                         Storyboard.TargetProperty="Opacity"
                         To="0.3" Duration="0"/>
      </Storyboard>
    </ControlTemplate.Resources>

    <BulletDecorator x:Name="bulletDecorator">
      <BulletDecorator.Background>
        <SolidColorBrush x:Name="bulletDecoratorBackground" Color="Transparent"/>
      </BulletDecorator.Background>
      <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="CommonStates">
          <VisualState x:Name="Normal"/>
          <VisualState x:Name="MouseOver" Storyboard="{StaticResource Hovering}"/>
          <VisualState x:Name="Pressed" Storyboard="{StaticResource Pressing}"/>
          <VisualState x:Name="Disabled" Storyboard="{StaticResource Disabling}"/>
        </VisualStateGroup>
        <VisualStateGroup x:Name="FocusStates">
          <VisualState x:Name="Focused" Storyboard="{StaticResource Focusing}"/>
          <VisualState x:Name="Unfocused" Storyboard="{StaticResource FocusingOff}"/>
        </VisualStateGroup>
        <VisualStateGroup x:Name="CheckStates">
          <VisualState x:Name="Checked" Storyboard="{StaticResource Checking}"/>
          <VisualState x:Name="Unchecked" Storyboard="{StaticResource CheckingOff}"/>
          <VisualState x:Name="Indeterminate" Storyboard="{StaticResource IndeterminateOn}"/>
        </VisualStateGroup>
        <VisualStateGroup x:Name="ValidationStates">
          <VisualState x:Name="Valid"/>
          <VisualState x:Name="InvalidFocused" Storyboard="{StaticResource InvalidingFocused}"/>
          <VisualState x:Name="InvalidUnfocused" Storyboard="{StaticResource InvalidingUnfocused}"/>
        </VisualStateGroup>
      </VisualStateManager.VisualStateGroups>
      <BulletDecorator.Bullet>
        <Grid Width="25" Height="25" HorizontalAlignment="Left" VerticalAlignment="Center">
          <Rectangle x:Name="rectangleBulletBackground" Height="21" Width="21"
                     StrokeThickness="1"
                     RadiusX="1" RadiusY="1">
            <Rectangle.Fill>
              <SolidColorBrush x:Name="rectangleBulletBackgroundBrush" Color="{StaticResource Color_Background_Normal}"/>
            </Rectangle.Fill>
            <Rectangle.Stroke>
              <SolidColorBrush x:Name="rectangleBulletStrokeBrush" Color="{StaticResource Color_Border_Normal}"/>
            </Rectangle.Stroke>
          </Rectangle>
          <Path x:Name="pathBulletCheckIcon" Height="21" Width="21" Margin="0" 
                Opacity="0" Fill="{DynamicResource Brush_Foreground_Normal}" 
                Stretch="UniformToFill"
                Data="M102.03442,598.79645 L105.22962,597.78918 L106.78825,600.42358 C106.78825,600.42358 108.51028,595.74304 110.21724,593.60419 C112.00967,591.35822 114.89314,591.42316 114.89314,591.42316 C114.89314,591.42316 112.67844,593.42645 111.93174,594.44464 C110.7449,596.06293 107.15683,604.13837 107.15683,604.13837 z"/>
          <Rectangle x:Name="rectangleIndeterminateBackground" 
                     Height="8" Width="8" RadiusX="1" RadiusY="1"
                     Opacity="0" Fill="{DynamicResource Brush_Background_Indeterminate}"/>
          <Rectangle x:Name="rectangleBulletFocus" Height="18" Width="18" 
                     IsHitTestVisible="false" Fill="{x:Null}"
                     Opacity="0" Stroke="{StaticResource Brush_Border_Focused}" 
                     StrokeThickness="1.2" RadiusX="1" RadiusY="1"/>
          <Rectangle x:Name="rectangleBulletInvalid" Width="18" Height="18"
                     Opacity="0" 
                     Fill="{StaticResource Brush_Background_InvalidFocused}"
                     Stroke="{StaticResource Brush_Border_InvalidFocused}"
                     RadiusX="1" RadiusY="1"/>
        </Grid>
      </BulletDecorator.Bullet>

      <Grid Height="15" Background="Transparent" x:Name="gridContent"
            HorizontalAlignment="Left" VerticalAlignment="Center">
        <Rectangle x:Name="rectangleContentBackground" Height="15" Opacity="0" Margin="1,0,0,0">
          <Rectangle.Fill>
            <SolidColorBrush x:Name="rectangleContentBackgroundFill" Color="{StaticResource Color_Background_Normal}"/>
          </Rectangle.Fill>
        </Rectangle>
        <ContentPresenter RecognizesAccessKey="True" 
                          VerticalAlignment="Center" HorizontalAlignment="Left">
        </ContentPresenter>
      </Grid>
    </BulletDecorator>

  </ControlTemplate>

  <Style TargetType="CheckBox">
    <Setter Property="Template" Value="{StaticResource CheckBoxTemplate}"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="Background" Value="{StaticResource Brush_Background_Normal}"/>
    <Setter Property="Foreground" Value="{StaticResource Brush_Foreground_Normal}"/>
    <Setter Property="BorderBrush" Value="{StaticResource Brush_Border_Normal}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Foreground" Value="{StaticResource Brush_Foreground_MouseOver}"/>
      </Trigger>
      <Trigger Property="IsEnabled" Value="False">
        <Setter Property="Foreground" Value="{DynamicResource Brush_Foreground_Disable}"/>
      </Trigger>
      <!--<Trigger Property="IsChecked" Value="True">
        <Setter Property="Foreground" Value="{DynamicResource Brush_Foreground_Checked}"/>
      </Trigger>-->
      <Trigger Property="Validation.HasError" Value="True">
        <Setter Property="IsEnabled" Value="False"/>
      </Trigger>
      <!--<MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="IsThreeState" Value="True"/>
          <Condition Property="IsChecked" Value="{x:Null}"/>
        </MultiTrigger.Conditions>
        <Setter Property="Foreground" Value="{StaticResource Brush_Foreground_Indeterminate}"/>
      </MultiTrigger>-->
    </Style.Triggers>
  </Style>
</ResourceDictionary>
