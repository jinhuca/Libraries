<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Shared.xaml"/>
  </ResourceDictionary.MergedDictionaries>

  <ControlTemplate x:Key="HeaderGripperTemplate" TargetType="{x:Type Thumb}">
    <Border Padding="{TemplateBinding Padding}">
      <Rectangle HorizontalAlignment="Stretch" 
                 Width="2"
                 Fill="{StaticResource Brush_Background_MouseOver}">
      </Rectangle>
    </Border>
  </ControlTemplate>

  <Style x:Key="GridViewColumnHeaderGripper" TargetType="{x:Type Thumb}">
    <Setter Property="Template" Value="{StaticResource HeaderGripperTemplate}"/>
    <Setter Property="Canvas.Right" Value="-8.5"/>
    <Setter Property="Width" Value="18"/>
    <Setter Property="Height" Value="{Binding Path=ActualHeight, RelativeSource={RelativeSource TemplatedParent}}"/>
  </Style>

  <ControlTemplate x:Key="GridViewColumnHeaderTemplate" TargetType="{x:Type GridViewColumnHeader}">
    <ControlTemplate.Resources>
      <Storyboard x:Key="Hovering">
        <ColorAnimation Storyboard.TargetName="borderBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Border_MouseOver}" 
                        Duration="0:0:0"/>
        <ColorAnimation Storyboard.TargetName="borderBackgroundBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Background_MouseOver}" 
                        Duration="0:0:0"/>
      </Storyboard>
      <Storyboard x:Key="Pressing">
        <ColorAnimation Storyboard.TargetName="borderBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Border_Pressed}"
                        Duration="0:0:0"/>
        <ColorAnimation Storyboard.TargetName="borderBackgroundBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Background_Pressed}"
                        Duration="0:0:0.1"/>
      </Storyboard>
      <Storyboard x:Key="Disabling">
        <ColorAnimation Storyboard.TargetName="borderBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Border_Disable}"
                        Duration="0:0:0"/>
        <ColorAnimation Storyboard.TargetName="borderBackgroundBrush"
                        Storyboard.TargetProperty="Color"
                        To="{StaticResource Color_Background_Disable}"
                        Duration="0:0:0"/>
      </Storyboard>
    </ControlTemplate.Resources>
    
    <Grid Margin="1">
      <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="CommonStates">
          <VisualState x:Name="Normal"/>
          <VisualState x:Name="MouseOver" Storyboard="{StaticResource Hovering}"/>
          <VisualState x:Name="Pressed" Storyboard="{StaticResource Pressing}"/>
          <VisualState x:Name="Disabled" Storyboard="{StaticResource Disabling}"/>
        </VisualStateGroup>
      </VisualStateManager.VisualStateGroups>
      
      <Grid>
        <Border x:Name="backgroundBorder" 
                Padding="{TemplateBinding Padding}" 
                BorderThickness="1"
                CornerRadius="2">
          <Border.Background>
            <SolidColorBrush x:Name="borderBackgroundBrush" Color="{StaticResource Color_Background_Normal}"/>
          </Border.Background>
          <Border.BorderBrush>
            <SolidColorBrush x:Name="borderBrush" Color="{StaticResource Color_Border_Normal}"/>
          </Border.BorderBrush>
        </Border>
        <ContentPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                          RecognizesAccessKey="True" 
                          Margin="4,0"/>
      </Grid>
      
      <Canvas>
        <Thumb x:Name="PART_HeaderGripper" 
               Style="{StaticResource GridViewColumnHeaderGripper}" 
               Margin="0,0,7,3" Width="Auto" 
               VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
      </Canvas>
    </Grid>
    
    <ControlTemplate.Triggers>
      <Trigger Property="Height" Value="Auto">
        <Setter Property="MinHeight" Value="20" />
      </Trigger>
      <Trigger Property="IsEnabled" Value="false">
        <Setter Property="Foreground" Value="{StaticResource Brush_Foreground_Disable}"/>
      </Trigger>
      <Trigger Property="Role" Value="Padding">
        <Setter TargetName="PART_HeaderGripper" Property="Visibility" Value="Collapsed"/>
      </Trigger>
      <Trigger Property="Role" Value="Floating">
        <Setter TargetName="PART_HeaderGripper" Property="Visibility" Value="Collapsed"/>
        <Setter Property="Background" Value="{StaticResource Brush_Background_MouseOver}"/>
        <Setter Property="Foreground" Value="{StaticResource Brush_Foreground_MouseOver}"/>
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>
  
  <Style TargetType="{x:Type GridViewColumnHeader}">
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Foreground" Value="{StaticResource Brush_Foreground_Normal}"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="Padding" Value="0"/>
    <Setter Property="Template" Value="{StaticResource GridViewColumnHeaderTemplate}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Foreground" Value="{StaticResource Brush_Foreground_MouseOver}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

</ResourceDictionary>